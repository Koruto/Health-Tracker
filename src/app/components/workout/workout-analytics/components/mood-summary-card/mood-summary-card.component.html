<div class="bg-white rounded-2xl shadow-sm p-4">
  <div class="flex flex-col items-center justify-between">
    <div class="mb-2">
      <h3
        class="text-gray-400 text-xs uppercase tracking-wider font-medium text-center">
        Workout Mood
      </h3>
    </div>

    <div class="flex flex-col items-center justify-center py-2">
      <div class="relative group">
        <!-- PrimeNG Chart -->
        <div class="w-28 h-28">
          <p-chart type="doughnut" [data]="chartData" [options]="chartOptions">
          </p-chart>
        </div>

        <!-- Emoji Overlay -->
        <div
          class="absolute inset-0 flex items-center justify-center pointer-events-none">
          <span class="text-6xl">{{ moodEmoji }}</span>
        </div>

        <div
          class="opacity-0 group-hover:opacity-100 transition-opacity absolute top-1/2 left-full ml-3 -translate-y-1/2 whitespace-nowrap">
          <div
            [style.background-color]="tooltipColor"
            class="px-4 py-2 rounded-lg shadow-lg">
            <div class="text-white/90 text-xs font-medium">
              Score: {{ avgMood.toFixed(1) }}/5
            </div>
            <!-- Triangle pointer on left -->
            <div
              class="absolute top-1/2 -left-2 -translate-y-1/2 w-0 h-0"
              [style.border-top]="'8px solid transparent'"
              [style.border-bottom]="'8px solid transparent'"
              [style.border-right]="'8px solid ' + tooltipColor"></div>
          </div>
        </div>
      </div>

      <span class="text-2xl font-bold mt-4 transition-colors duration-300">
        {{ moodLabel }}
      </span>
    </div>
  </div>
</div>
